<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Windowsç«¯å£è¢«å ç”¨è§£å†³æ–¹æ³•</title>
    <url>/2021/03/19/Windows%E7%AB%AF%E5%8F%A3%E8%A2%AB%E5%8D%A0%E7%94%A8%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/</url>
    <content><![CDATA[<h2 id="Error-åœºæ™¯"><a href="#Error-åœºæ™¯" class="headerlink" title="Error åœºæ™¯"></a>Error åœºæ™¯</h2><p>å¯åŠ¨ Java é¡¹ç›®å¤±è´¥ï¼Œæ§åˆ¶å°æ˜¾ç¤º</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">Error starting ApplicationContext. To display the conditions report`re-run your application with &#x27;debug&#x27; enabled.</span><br><span class="line"></span><br><span class="line">***************************</span><br><span class="line">APPLICATION FAILED TO START</span><br><span class="line">***************************</span><br><span class="line"></span><br><span class="line">Description:</span><br><span class="line"></span><br><span class="line">The Tomcat connector configured to listen on port 8080 failed to start. The port may already be in use or the connector may be misconfigured.</span><br><span class="line"></span><br><span class="line">Action:</span><br><span class="line"></span><br><span class="line">Verify the connector&#x27;s configuration, identify and stop any process that&#x27;s listening on port 8080, or configure this application to listen on another port.</span><br></pre></td></tr></table></figure>

<h2 id="è§£å†³æ–¹æ³•"><a href="#è§£å†³æ–¹æ³•" class="headerlink" title="è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h2><ul>
<li><p>æŸ¥çœ‹é‚£äº›è¿›ç¨‹å ç”¨äº†æˆ‘ä»¬çš„ç«¯å£å·<code>8080</code></p>
<p>æ‰“å¼€ Windows æ§åˆ¶å°ï¼Œè¾“å…¥å‘½ä»¤</p>
</li>
</ul>
<p><code>netstat -nao | findstr &quot;8080&quot;</code></p>
<p>å¯ä»¥çœ‹åˆ°å ç”¨ <code>8080</code> ç«¯å£çš„è¿›ç¨‹ PID ä¸º <code>8404</code></p>
<ul>
<li><p>æ€æ­»ç›¸åº”è¿›ç¨‹ï¼š</p>
<p>åœ¨ Windows æ§åˆ¶å°ï¼Œç»§ç»­è¾“å…¥å‘½ä»¤</p>
</li>
</ul>
<p><code>taskkill /pid 8404 /f</code></p>
<p><img src="https://img.imgdb.cn/item/605440cc524f85ce2903d864.jpg" alt="avatar"></p>
]]></content>
      <categories>
        <category>æ“ä½œç³»ç»Ÿ</category>
        <category>Windows</category>
      </categories>
      <tags>
        <tag>ç«¯å£å ç”¨</tag>
      </tags>
  </entry>
  <entry>
    <title>AutoUpdaterè‡ªåŠ¨æ›´æ–°å®¢æˆ·ç«¯</title>
    <url>/2021/03/19/AutoUpdater%E8%87%AA%E5%8A%A8%E6%9B%B4%E6%96%B0%E5%AE%A2%E6%88%B7%E7%AB%AF/</url>
    <content><![CDATA[<h2 id="å®‰è£…-NuGet-åŒ…"><a href="#å®‰è£…-NuGet-åŒ…" class="headerlink" title="å®‰è£… NuGet åŒ…"></a>å®‰è£… NuGet åŒ…</h2><pre><code>åœ¨Visio studioä¸­å³å‡»è§£å†³æ–¹æ¡ˆï¼Œé€‰æ‹©ç®¡ç†NuGetåŒ…ï¼Œæœç´¢å®‰è£…Autoupdater.NET.Officialã€‚
</code></pre>
<h2 id="å·¥ä½œç®€ä»‹"><a href="#å·¥ä½œç®€ä»‹" class="headerlink" title="å·¥ä½œç®€ä»‹"></a>å·¥ä½œç®€ä»‹</h2><pre><code>    ä»æœåŠ¡å™¨ä¸‹è½½åŒ…å«æ›´æ–°æ–‡ä»¶çš„XMLæ–‡ä»¶ï¼Œä»ä¸­è·å–è½¯ä»¶çš„æœ€æ–°ç‰ˆæœ¬ä¿¡æ¯ã€‚å¦‚æœè½¯ä»¶çš„æœ€æ–°ç‰ˆæœ¬å¤§äºç”¨æˆ·PCä¸Šå®‰è£…çš„å½“å‰è½¯ä»¶ç‰ˆæœ¬ï¼Œåˆ™ä¼šå‘ç”¨æˆ·æ˜¾ç¤ºæ›´æ–°å¯¹è¯æ¡†ã€‚å½“ç„¶ï¼Œä¹Ÿå¯ä»¥è®¾ç½®æŒ‰é’®äº‹ä»¶è¿›è¡Œç‚¹å‡»ä¸‹è½½æ›´æ–°æ–‡ä»¶ã€‚å¦‚æœæ–‡ä»¶æ˜¯å‹ç¼©åŒ…ï¼Œä¼šè‡ªåŠ¨å°†å‹ç¼©åŒ…çš„å†…å®¹è§£å‹ç¼©åˆ°åº”ç”¨ç¨‹åºç›®å½•ã€‚
</code></pre>
<h2 id="XML-æ–‡ä»¶"><a href="#XML-æ–‡ä»¶" class="headerlink" title="XML æ–‡ä»¶"></a>XML æ–‡ä»¶</h2><pre><code><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version = &quot;1.0&quot; encoding = &quot;UTF-8&quot;?&gt;</span></span><br><span class="line">&lt; item &gt;</span><br><span class="line">    &lt; version &gt; 2.0.0.0 &lt;/ version &gt;</span><br><span class="line">    &lt; url &gt; https://www.cnblogs.com&lt;/ url &gt;</span><br><span class="line">    &lt; changelog &gt; https://www.cnblogs.com &lt;/ changelog &gt;</span><br><span class="line">    &lt; mandatory &gt; false &lt;/ mandatory &gt;</span><br><span class="line">&lt;/ item &gt;</span><br></pre></td></tr></table></figure>

å¦‚ä¸Šæ‰€ç¤ºï¼š
    version(å¿…å¡«)ï¼šæ ¼å¼ä¸ºX.X.X.Xçš„ç‰ˆæœ¬æ ‡è®°ã€‚
    url(å¿…å¡«)ï¼šæœ€æ–°ç‰ˆæœ¬å®‰è£…ç¨‹åºæ–‡ä»¶çš„urlã€‚
    changelog(å¯é€‰)ï¼šç¨‹åºæ›´æ”¹æ—¥å¿—çš„urlã€‚
    mandatory(å¯é€‰)ï¼šå¼ºåˆ¶æ›´æ–°ï¼Œå°†è·³è¿‡ä¿¡æ¯å’Œç¨åæ›´æ–°æŒ‰é’®éšè—ã€‚
é€‰æ‹©ä½¿ç”¨ä»¥ä¸‹ä»£ç å°†è·³è¿‡updateå¯¹è¯æ¡†ï¼Œè‡ªåŠ¨ä¸‹è½½æ›´æ–°ï¼š

<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mandatory</span> <span class="attr">mode</span>=<span class="string">&quot;2&quot;</span>&gt;</span>true<span class="tag">&lt;/<span class="name">mandatory</span>&gt;</span></span><br></pre></td></tr></table></figure>

    args(å¯é€‰)ï¼šä¸ºå®‰è£…æä¾›å‘½ä»¤è¡Œå‚æ•°ï¼Œå‚æ•°å¯ä»¥åŒ…å«%path%ï¼Œç”¨ä»¥æ›¿æ¢æ­£åœ¨æ‰§è¡Œçš„åº”ç”¨ç¨‹åºæ‰€åœ¨ç›®å½•çš„è·¯å¾„ã€‚
    checksum(å¯é€‰)ï¼šæ›´æ–°æ–‡ä»¶çš„æ ¡éªŒå’Œï¼Œç”¨ä»¥æ£€éªŒæ–‡ä»¶çš„å®Œæ•´æ€§ï¼Œalgorithmå±æ€§æŒ‡å®šç®—æ³•ï¼Œæ”¯æŒ MD5,SHA1,SHA256,SHA384,SHA512ã€‚

<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">checksum</span> <span class="attr">algorithm</span>=<span class="string">&quot;MD5&quot;</span>&gt;</span>Update file Checksum<span class="tag">&lt;/<span class="name">checksum</span>&gt;</span></span><br></pre></td></tr></table></figure>
</code></pre>
<h2 id="çª—ä½“ä»£ç "><a href="#çª—ä½“ä»£ç " class="headerlink" title="çª—ä½“ä»£ç "></a>çª—ä½“ä»£ç </h2><pre><code><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">using</span> AutoUpdaterDotNET;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">button1_Click</span>(<span class="params"><span class="built_in">object</span> sender, EventArgs e</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="comment">//XMLæ–‡ä»¶åœ°å€</span></span><br><span class="line">            AutoUpdater.Start(<span class="string">&quot;https://www.cnblogs.com&quot;</span>);</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>
</code></pre>
<h2 id="å‚è€ƒåœ°å€"><a href="#å‚è€ƒåœ°å€" class="headerlink" title="å‚è€ƒåœ°å€"></a>å‚è€ƒåœ°å€</h2><p>[<a href="https://github.com/ravibpatel/AutoUpdater.NET]">https://github.com/ravibpatel/AutoUpdater.NET]</a></p>
]]></content>
      <categories>
        <category>.Net</category>
        <category>Winform</category>
      </categories>
      <tags>
        <tag>AutoUpdater</tag>
        <tag>å®¢æˆ·ç«¯</tag>
      </tags>
  </entry>
  <entry>
    <title>CefSharpåˆ›å»ºå®¢æˆ·ç«¯</title>
    <url>/2021/03/19/CefSharp%E5%88%9B%E5%BB%BA%E5%AE%A2%E6%88%B7%E7%AB%AF/</url>
    <content><![CDATA[<h2 id="å®‰è£…-NuGet-åŒ…"><a href="#å®‰è£…-NuGet-åŒ…" class="headerlink" title="å®‰è£… NuGet åŒ…"></a>å®‰è£… NuGet åŒ…</h2><pre><code>åœ¨Visio studioä¸­å³å‡»è§£å†³æ–¹æ¡ˆï¼Œé€‰æ‹©ç®¡ç†NuGetåŒ…ï¼Œæœç´¢å®‰è£…CefSharp.WinFormsã€‚
</code></pre>
<h2 id="é…ç½®å·¥ä½œ"><a href="#é…ç½®å·¥ä½œ" class="headerlink" title="é…ç½®å·¥ä½œ"></a>é…ç½®å·¥ä½œ</h2><pre><code>(1)é¦–å…ˆå³å‡»é¡¹ç›®é€‰æ‹©å±æ€§ï¼Œåœ¨&quot;ç”Ÿæˆ&quot;é€‰é¡¹ä¸­å°†&quot;é¦–é€‰32ä½&quot;å‹¾ä¸Šã€‚

(2)å…¶æ¬¡åœ¨é¡¹ç›®æ–‡ä»¶ç›®å½•ä¸‹æ‰¾åˆ°&quot;é¡¹ç›®åç§°.csproj&quot;æ–‡ä»¶ï¼Œåœ¨ç¬¬ä¸€ä¸ªPropertyGroupä¸­æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š

<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">CefSharpAnyCpuSupport</span>&gt;</span>true<span class="tag">&lt;/<span class="name">CefSharpAnyCpuSupport</span>&gt;</span></span><br></pre></td></tr></table></figure>

(3)æœ€åä¿®æ”¹App.configæ–‡ä»¶ï¼Œå’Œ&lt;startup&gt;æ ‡ç­¾å¹¶åˆ—åœ°ä½ï¼Œæ·»åŠ ä»¥ä¸‹ä»£ç ï¼š

<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">runtime</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">assemblyBinding</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:schemas-microsoft-com:asm.v1&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">probing</span> <span class="attr">privatePath</span>=<span class="string">&quot;x86&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">assemblyBinding</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">runtime</span>&gt;</span></span><br></pre></td></tr></table></figure>
</code></pre>
<h2 id="çª—ä½“ä»£ç "><a href="#çª—ä½“ä»£ç " class="headerlink" title="çª—ä½“ä»£ç "></a>çª—ä½“ä»£ç </h2><pre><code><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> System.ComponentModel;</span><br><span class="line"><span class="keyword">using</span> System.Data;</span><br><span class="line"><span class="keyword">using</span> System.Drawing;</span><br><span class="line"><span class="keyword">using</span> System.Linq;</span><br><span class="line"><span class="keyword">using</span> System.Text;</span><br><span class="line"><span class="keyword">using</span> System.Threading.Tasks;</span><br><span class="line"><span class="keyword">using</span> System.Windows.Forms;</span><br><span class="line"><span class="keyword">using</span> CefSharp;</span><br><span class="line"><span class="keyword">using</span> CefSharp.WinForms;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">embebbedChromium</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">partial</span> <span class="keyword">class</span> <span class="title">Form1</span> : <span class="title">Form</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">public</span> ChromiumWebBrowser chromeBrowser;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">Form1</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            InitializeComponent();</span><br><span class="line">            <span class="comment">// åˆå§‹åŒ–å…¨å±€ç»„ä»¶åå¯åŠ¨æµè§ˆå™¨</span></span><br><span class="line">            InitializeChromium();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Form1_Load</span>(<span class="params"><span class="built_in">object</span> sender, EventArgs e</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">InitializeChromium</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            CefSettings settings = <span class="keyword">new</span> CefSettings();</span><br><span class="line">            <span class="comment">//æŒ‰ç…§è®¾ç½®åˆå§‹åŒ–cef</span></span><br><span class="line">            Cef.Initialize(settings);</span><br><span class="line">            <span class="comment">// åˆ›å»ºä¸€ä¸ªæµè§ˆå™¨ç»„ä»¶</span></span><br><span class="line">            chromeBrowser = <span class="keyword">new</span> ChromiumWebBrowser(<span class="string">&quot;http://baidu.com&quot;</span>);</span><br><span class="line">            <span class="comment">// å°†å…¶æ·»åŠ åˆ°è¡¨å•å¹¶å°†å…¶å¡«å……åˆ°è¡¨å•çª—å£</span></span><br><span class="line">            <span class="keyword">this</span>.Controls.Add(chromeBrowser);</span><br><span class="line">            chromeBrowser.Dock = DockStyle.Fill;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Form1_FormClosing</span>(<span class="params"><span class="built_in">object</span> sender, FormClosingEventArgs e</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Cef.Shutdown();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</code></pre>
<h2 id="å‚è€ƒåœ°å€"><a href="#å‚è€ƒåœ°å€" class="headerlink" title="å‚è€ƒåœ°å€"></a>å‚è€ƒåœ°å€</h2><p>[<a href="https://ourcodeworld.com/articles/read/173/how-to-use-cefsharp-chromium-embedded-framework-csharp-in-a-winforms-application]">https://ourcodeworld.com/articles/read/173/how-to-use-cefsharp-chromium-embedded-framework-csharp-in-a-winforms-application]</a></p>
]]></content>
      <categories>
        <category>.Net</category>
        <category>Winform</category>
      </categories>
      <tags>
        <tag>å®¢æˆ·ç«¯</tag>
        <tag>CefSharp</tag>
      </tags>
  </entry>
  <entry>
    <title>WinFormè®¾ç½®æ§ä»¶å±…ä¸­</title>
    <url>/2021/03/19/WinForm%E8%AE%BE%E7%BD%AE%E6%8E%A7%E4%BB%B6%E5%B1%85%E4%B8%AD/</url>
    <content><![CDATA[<h2 id="ç®€å•é˜è¿°"><a href="#ç®€å•é˜è¿°" class="headerlink" title="ç®€å•é˜è¿°"></a>ç®€å•é˜è¿°</h2><pre><code>åœ¨C#çš„WinFormé‡Œé¢ï¼ŒåŸç”Ÿæ§ä»¶æ˜¯æ²¡æœ‰å±…ä¸­å±æ€§çš„ï¼Œæ•…é€šè¿‡é‡å†™OnResize(EventArgs e)æ–¹æ³•ï¼Œé€šè¿‡è®¡ç®—ï¼Œé‡æ–°å®šä½æ§ä»¶ä½ç½®ã€‚
</code></pre>
<h2 id="ä»¥-Label-æ§ä»¶ä¸ºä¾‹"><a href="#ä»¥-Label-æ§ä»¶ä¸ºä¾‹" class="headerlink" title="ä»¥ Label æ§ä»¶ä¸ºä¾‹"></a>ä»¥ Label æ§ä»¶ä¸ºä¾‹</h2><pre><code>(1)å°†labelçš„AutoSizeå±æ€§è®¾ç½®ä¸ºfalseï¼›Dockå±æ€§è®¾ç½®ä¸ºfillï¼›TextAlignå±æ€§è®¾ç½®ä¸ºMiddleCenterã€‚
(2)é‡å†™å±…ä¸­çš„ä»£ç å¦‚ä¸‹ï¼š
</code></pre>
<figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">OnResize</span>(<span class="params">EventArgs e</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">            <span class="keyword">base</span>.OnResize(e);</span><br><span class="line">            <span class="built_in">int</span> x = (<span class="built_in">int</span>)(<span class="number">0.5</span> * (<span class="keyword">this</span>.Width - label1.Width));</span><br><span class="line">            <span class="built_in">int</span> y = label1.Location.Y;</span><br><span class="line">            label1.Location = <span class="keyword">new</span> System.Drawing.Point(x,y);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h2 id="å‚è€ƒåœ°å€"><a href="#å‚è€ƒåœ°å€" class="headerlink" title="å‚è€ƒåœ°å€"></a>å‚è€ƒåœ°å€</h2><p>[<a href="https://blog.csdn.net/mingyueyixi/article/details/55035935]">https://blog.csdn.net/mingyueyixi/article/details/55035935]</a></p>
]]></content>
      <categories>
        <category>. Net</category>
        <category>Winform</category>
      </categories>
      <tags>
        <tag>æ§ä»¶</tag>
        <tag>å±…ä¸­</tag>
      </tags>
  </entry>
  <entry>
    <title>Spring Batchå­¦ä¹ ç¬”è®°ï¼ˆä¸€ï¼‰</title>
    <url>/2021/03/19/Spring-Batch%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/</url>
    <content><![CDATA[<h2 id="Spring-Batch-ç®€ä»‹"><a href="#Spring-Batch-ç®€ä»‹" class="headerlink" title="Spring Batch ç®€ä»‹"></a>Spring Batch ç®€ä»‹</h2><p>Spring Batch æä¾›äº†å¯é‡å¤ä½¿ç”¨çš„åŠŸèƒ½ï¼Œç”¨æ¥å¤„ç†å¤§é‡æ•°æ®ã€‚åŒ…æ‹¬è®°å½•ã€è·Ÿè¸ªï¼Œäº‹åŠ¡ç®¡ç†ï¼Œä½œä¸šå¤„ç†ç»Ÿè®¡ï¼Œä½œä¸šé‡å¯ï¼Œè·³è¿‡å’Œèµ„æºç®¡ç†ã€‚<br>æ­¤å¤–è¿˜æä¾›äº†æ›´é«˜çº§çš„æŠ€æœ¯æœåŠ¡å’ŒåŠŸèƒ½ï¼Œé€šè¿‡ä¼˜åŒ–å’Œåˆ†åŒºæŠ€æœ¯å®ç°æé«˜å®¹é‡å’Œé«˜æ€§èƒ½çš„æ‰¹å¤„ç†ä½œä¸šã€‚</p>
<h2 id="Spring-Batch-ä½¿ç”¨åœºæ™¯"><a href="#Spring-Batch-ä½¿ç”¨åœºæ™¯" class="headerlink" title="Spring Batch ä½¿ç”¨åœºæ™¯"></a>Spring Batch ä½¿ç”¨åœºæ™¯</h2><p>(1)ä¸€èˆ¬çš„æ‰¹å¤„ç†ç¨‹åº</p>
<p>Â·ä»æ•°æ®åº“ï¼Œæ–‡ä»¶æˆ–è€…é˜Ÿåˆ—ä¸­è¯»å–å¤§é‡æ•°æ®<br>Â·å¤„ç†è¯»å–åˆ°çš„æ•°æ®<br>Â·å°†å¤„ç†å®Œæˆçš„æ•°æ®ä¿å­˜åˆ°æ–‡ä»¶ï¼Œæ•°æ®åº“</p>
<p>(2)ä¸šåŠ¡åœºæ™¯</p>
<p>Â·å®šæœŸæäº¤æ‰¹å¤„ç†<br>Â·å¹¶å‘æ‰¹å¤„ç†ï¼Œå¹¶è¡Œå¤„ç† Job<br>Â·åˆ†é˜¶æ®µçš„ä¼ä¸šæ¶ˆæ¯é©±åŠ¨å¤„ç†<br>Â·å¤§è§„æ¨¡å¹¶è¡Œæ‰¹å¤„ç†<br>Â·å¤±è´¥åæ‰‹åŠ¨æˆ–é¢„å®šé‡å¯<br>Â·ä¾èµ–æ­¥éª¤çš„é¡ºåºå¤„ç†<br>Â·éƒ¨åˆ†å¤„ç†ï¼Œè·³è¿‡è®°å½•<br>Â·æ•´æ‰¹äº¤æ˜“ï¼Œé€‚ç”¨äºæ‰¹é‡è¾ƒå°æˆ–ç°æœ‰å­˜å‚¨è¿‡ç¨‹/è„šæœ¬çš„æƒ…å†µ</p>
<h2 id="Spring-Batch-ä¸»è¦ç»„æˆéƒ¨åˆ†"><a href="#Spring-Batch-ä¸»è¦ç»„æˆéƒ¨åˆ†" class="headerlink" title="Spring Batch ä¸»è¦ç»„æˆéƒ¨åˆ†"></a>Spring Batch ä¸»è¦ç»„æˆéƒ¨åˆ†</h2><p>Â·JobRepositoryï¼Œç”¨æ¥æ³¨å†Œ job çš„å®¹å™¨<br>Â·JobLauncherï¼Œç”¨æ¥å¯åŠ¨ job çš„æ¥å£<br>Â·Jobï¼Œå®é™…æ‰§è¡Œçš„ä»»åŠ¡ï¼ŒåŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ª Step<br>Â·Stepï¼Œstep åŒ…å« ItemReaderã€ItemProcessor å’Œ ItemWriter<br>Â·ItemReaderï¼Œç”¨æ¥è¯»å–æ•°æ®çš„æ¥å£<br>Â·ItemProcessorï¼Œç”¨æ¥å¤„ç†æ•°æ®çš„æ¥å£<br>Â·ItemWriterï¼Œç”¨æ¥è¾“å‡ºæ•°æ®çš„æ¥å£<br>ä»¥ä¸Š Spring Batch çš„ä¸»è¦ç»„æˆéƒ¨åˆ†åªéœ€è¦æ³¨å†Œæˆ Spring çš„ Bean å³å¯ã€‚æ‰¹å¤„ç†çš„é…ç½®ç±»ä¸Šéœ€è¦ä½¿ç”¨@EnabelBatchProcessingã€‚</p>
<h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><p>(1)ç›‘å¬å™¨ JobListener</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JobListener</span> <span class="keyword">implements</span> <span class="title">JobExecutionListener</span></span>&#123;</span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">beforeJob</span><span class="params">(JobExecution jobExecution)</span></span>&#123;</span><br><span class="line">  <span class="comment">// Jobæ‰§è¡Œå‰éœ€è¦æ‰§è¡Œçš„æ“ä½œ</span></span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterJob</span><span class="params">(JobExecution jobExecution)</span></span>&#123;</span><br><span class="line">  <span class="comment">// Jobæ‰§è¡Œå®Œæˆåéœ€è¦æ‰§è¡Œçš„æ“ä½œ</span></span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>(2)é…ç½®ç±» DataBatchConfiguration</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableBatchProcessing</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DataBatchConfiguration</span></span>&#123;</span><br><span class="line"> <span class="comment">// ç”¨äºæ„å»ºJob</span></span><br><span class="line"> <span class="meta">@Resource</span></span><br><span class="line"> <span class="keyword">private</span> JobBuilderFactory jobBuilderFactory;</span><br><span class="line"></span><br><span class="line"> <span class="comment">// ç”¨äºæ„å»ºStep</span></span><br><span class="line"> <span class="meta">@Resource</span></span><br><span class="line"> <span class="keyword">private</span> StepBuilderFactory stepBuilderFactory;</span><br><span class="line"></span><br><span class="line"> <span class="comment">// ç›‘å¬å™¨</span></span><br><span class="line"> <span class="meta">@Resource</span></span><br><span class="line"> <span class="keyword">private</span> JobListener jobListener;</span><br><span class="line"></span><br><span class="line"> <span class="comment">// ItemReader(ä½¿ç”¨çš„å…¶ä¸­ä¸€ç§è¯»å–æ–¹å¼)</span></span><br><span class="line"> <span class="meta">@Autowired</span></span><br><span class="line"> <span class="keyword">private</span> RepositoryItemReader readerData;</span><br><span class="line"></span><br><span class="line"> <span class="comment">// ItemWriter</span></span><br><span class="line"> <span class="meta">@Autowired</span></span><br><span class="line"> <span class="keyword">private</span> ItemReader writerData;</span><br><span class="line"></span><br><span class="line"> <span class="comment">// Job</span></span><br><span class="line"> <span class="meta">@Bean</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> Job <span class="title">dataHandleJob</span><span class="params">()</span></span>&#123;</span><br><span class="line">  <span class="keyword">return</span> jobBuilderFactory.get(<span class="string">&quot;dataHandleJob&quot;</span>).incrementer(<span class="keyword">new</span> RunIdIncrementer()).start(getDataStep())</span><br><span class="line">   .listener(jobListener).build();</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="comment">// Step</span></span><br><span class="line"> <span class="comment">// User:è¦å¤„ç†çš„å¯¹è±¡</span></span><br><span class="line"> <span class="meta">@Bean</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> Step <span class="title">getTDistSellOut</span><span class="params">()</span> </span>&#123;</span><br><span class="line"> <span class="keyword">return</span> stepBuilderFactory.get(<span class="string">&quot;getData&quot;</span>).&lt;User, User&gt;chunk(<span class="number">10000</span>) <span class="comment">// ä¸€æ¬¡commitæ•°æ®çš„æ•°é‡</span></span><br><span class="line">   .faultTolerant().retryLimit(<span class="number">3</span>)</span><br><span class="line">   .retry(Exception.class)</span><br><span class="line">   .skipLimit(<span class="number">100</span>)            <span class="comment">// å‘ç”Ÿå¼‚å¸¸æ—¶ï¼Œå…è®¸é‡è¯•çš„æ¬¡æ•°</span></span><br><span class="line">   .skip(Exception.class)</span><br><span class="line">   .reader(readerData)              <span class="comment">// reader</span></span><br><span class="line">   .writer(writerData).build();        <span class="comment">// writer</span></span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>(3)è¯»å–ç±» ReaderStep</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ReaderStep</span></span>&#123;</span><br><span class="line"> <span class="meta">@Resource</span></span><br><span class="line"> <span class="keyword">private</span> EntityManagerFactory emf;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Autowired</span></span><br><span class="line"> <span class="keyword">private</span> UserRepository userRepository;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Bean</span> <span class="function">RepositoryItemReader&lt;User&gt; <span class="title">readerData</span><span class="params">()</span></span>&#123;</span><br><span class="line">  <span class="comment">// æ’åºmap(è¯»å–æ•°æ®æŒ‰ç…§IDè¿›è¡Œæ­£åºæ’åˆ—)</span></span><br><span class="line">  Map&lt;String,Sort.Direction&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">  map.put(<span class="string">&quot;id&quot;</span>,sort.Direction.ASC);</span><br><span class="line">  <span class="comment">// SQLè¯­å¥æ‰€éœ€å‚æ•°LIST</span></span><br><span class="line">  List&lt;String&gt; params = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">  params.add(<span class="string">&quot;2019-03-20&quot;</span>);</span><br><span class="line">  RepositoryItemReader&lt;User&gt; repositoryItemReader = <span class="keyword">new</span> <span class="keyword">new</span> RepositoryItemReader&lt;&gt;();</span><br><span class="line">  <span class="comment">// Set Repository</span></span><br><span class="line">  repositoryItemReader.setRepository(userRepository);</span><br><span class="line">  <span class="comment">// Set PageSize(æ²¡æœ‰ä¼šæŠ¥é”™)</span></span><br><span class="line">  repositoryItemReader.setPageSize(<span class="number">5</span>);</span><br><span class="line">  <span class="comment">// Set Repository Method</span></span><br><span class="line">  repositoryItemReader.setMethodName(<span class="string">&quot;findByDateLike&quot;</span>);</span><br><span class="line">  <span class="comment">// Set å‚æ•°List</span></span><br><span class="line">  repositoryItemReader.setArguments(params);</span><br><span class="line">  <span class="comment">// Set æ’åºMap</span></span><br><span class="line">  repositoryItemReader.setSort(map);</span><br><span class="line">  <span class="keyword">return</span> repositoryItemReader;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>(4)å†™å‡ºç±» WriterStep</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WriterStep</span> </span>&#123;</span><br><span class="line"> <span class="meta">@Resource</span></span><br><span class="line"> <span class="keyword">private</span> UserRepository userRepository;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Bean</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> RepositoryItemWriter&lt;User&gt; <span class="title">writerData</span><span class="params">()</span></span>&#123;</span><br><span class="line">  RepositoryItemWriter&lt;User&gt; repositoryItemWriter = <span class="keyword">new</span> RepositoryItemWriter&lt;&gt;();</span><br><span class="line">  repositoryItemWriter.setRepository(userRepository);</span><br><span class="line">  repositoryItemWriter.setMethodName(<span class="string">&quot;save&quot;</span>);</span><br><span class="line">  <span class="keyword">return</span> repositoryItemWriter;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å‚è€ƒç½‘å€"><a href="#å‚è€ƒç½‘å€" class="headerlink" title="å‚è€ƒç½‘å€"></a>å‚è€ƒç½‘å€</h2><p>[<a href="https://www.cnblogs.com/ealenxie/p/9647703.html]">https://www.cnblogs.com/ealenxie/p/9647703.html]</a></p>
]]></content>
      <categories>
        <category>åç«¯</category>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Spring Batch</tag>
        <tag>æ‰¹å¤„ç†</tag>
      </tags>
  </entry>
  <entry>
    <title>Javaç±»å‹è½¬æ¢å·¥å…·ç±»ï¼ˆæŒç»­æ›´æ–°ï¼‰</title>
    <url>/2021/03/19/Java%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2%E5%B7%A5%E5%85%B7%E7%B1%BB%EF%BC%88%E6%8C%81%E7%BB%AD%E6%9B%B4%E6%96%B0%EF%BC%89/</url>
    <content><![CDATA[<h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p>  å°†é¡¹ç›®ä¸­ç”¨åˆ°çš„ç±»å‹è½¬æ¢åšä¸ªè®°å½•ã€‚</p>
<h2 id="è¯¦ç»†ä»£ç "><a href="#è¯¦ç»†ä»£ç " class="headerlink" title="è¯¦ç»†ä»£ç "></a>è¯¦ç»†ä»£ç </h2> <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TypeUtil</span> </span>&#123;</span><br><span class="line"> <span class="comment">// [start]å­—ç¬¦ä¸²è½¬å„ç§æ ¼å¼</span></span><br><span class="line"></span><br><span class="line"> <span class="comment">// å­—ç¬¦ä¸²è½¬æ—¥æœŸ(æ ¼å¼:&quot;yyyyMMdd&quot;)</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Date <span class="title">StrToDateFirst</span><span class="params">(String str)</span> </span>&#123;</span><br><span class="line">  DateFormat format = <span class="keyword">new</span> SimpleDateFormat(<span class="string">&quot;yyyyMMdd&quot;</span>);</span><br><span class="line">  Date date = <span class="keyword">null</span>;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">   date = format.parse(str);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (ParseException e) &#123;</span><br><span class="line">   e.printStackTrace();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> date;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="comment">// å­—ç¬¦ä¸²è½¬æ—¥æœŸ(æ ¼å¼:&quot;dd/MM/yyyy&quot;)</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Date <span class="title">StrToDateSecond</span><span class="params">(String str)</span> </span>&#123;</span><br><span class="line">  DateFormat format = <span class="keyword">new</span> SimpleDateFormat(<span class="string">&quot;dd/MM/yyyy&quot;</span>);</span><br><span class="line">  Date date = <span class="keyword">null</span>;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">   date = format.parse(str);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (ParseException e) &#123;</span><br><span class="line">   e.printStackTrace();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> date;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="comment">// å­—ç¬¦ä¸²è½¬æ—¥æœŸ(æ ¼å¼:&quot;yyyy-MM-dd&quot;)</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Date <span class="title">StrToDateThird</span><span class="params">(String str)</span> </span>&#123;</span><br><span class="line">  DateFormat format = <span class="keyword">new</span> SimpleDateFormat(<span class="string">&quot;yyyy-MM-dd&quot;</span>);</span><br><span class="line">  Date date = <span class="keyword">null</span>;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">   date = format.parse(str);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (ParseException e) &#123;</span><br><span class="line">   e.printStackTrace();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> date;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="comment">// å­—ç¬¦ä¸²è½¬æ—¥æœŸ(æ ¼å¼:&quot;yyyy-MM-dd HH:mm:ss&quot;)</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Date <span class="title">StrToDateFourth</span><span class="params">(String str)</span> </span>&#123;</span><br><span class="line">  DateFormat format = <span class="keyword">new</span> SimpleDateFormat(<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>);</span><br><span class="line">  Date date = <span class="keyword">null</span>;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">   date = format.parse(str);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (ParseException e) &#123;</span><br><span class="line">   e.printStackTrace();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> date;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="comment">// å­—ç¬¦ä¸²è½¬Integer</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Integer <span class="title">StrToInteger</span><span class="params">(String str)</span> </span>&#123;</span><br><span class="line">  Integer integer = <span class="keyword">null</span>;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">   integer = Integer.valueOf(str);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">   e.printStackTrace();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> integer;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="comment">// å­—ç¬¦ä¸²è½¬Double</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Double <span class="title">StrToDouble</span><span class="params">(String str)</span> </span>&#123;</span><br><span class="line">  Double double1 = <span class="number">0.00</span>;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">   double1 = Double.parseDouble(str);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">   e.printStackTrace();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> double1;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="comment">// å­—ç¬¦ä¸²è½¬æ—¶é—´æˆ³</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Timestamp <span class="title">StrToTimeStamp</span><span class="params">(String str)</span> </span>&#123;</span><br><span class="line">  Timestamp timestamp = <span class="keyword">null</span>;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">   timestamp = Timestamp.valueOf(str);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">   e.printStackTrace();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> timestamp;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="comment">// å­—ç¬¦ä¸²è½¬BigDecimal</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> BigDecimal <span class="title">StrTiBigdecimal</span><span class="params">(String str)</span> </span>&#123;</span><br><span class="line">  BigDecimal bigDecimal = <span class="keyword">null</span>;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">   bigDecimal = <span class="keyword">new</span> BigDecimal(str);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">   e.printStackTrace();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> bigDecimal;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="comment">// [end]</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>åç«¯</category>
        <category>Java</category>
      </categories>
      <tags>
        <tag>ç±»å‹è½¬æ¢</tag>
        <tag>Utils</tag>
      </tags>
  </entry>
  <entry>
    <title>ç»´æŠ¤javaé¡¹ç›®ä¹‹==å’Œequals</title>
    <url>/2021/03/19/%E7%BB%B4%E6%8A%A4java%E9%A1%B9%E7%9B%AE%E4%B9%8B-%E5%92%8Cequals/</url>
    <content><![CDATA[<p>æœ€è¿‘å‘ç”Ÿä¸€ä»¶å¾ˆå°´å°¬çš„äº‹æƒ…ï¼Œåœ¨ç»´æŠ¤ä¸€ä¸ª Java é¡¹ç›®çš„æ—¶å€™ï¼Œå‘ç°æœ‰ä½¿ç”¨ <code>==</code> æ¥æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡çš„å±æ€§ï¼Œ<br>äºæ˜¯é¡ºæ‰‹å°±æŠŠ <code>==</code> æ”¹æˆäº† equalsã€‚æ‚²å‰§å‘ç”Ÿâ€¦â€¦ğŸ¤£ğŸ¤£ğŸ¤£</p>
<h2 id="å’Œ-equals-çš„åŒºåˆ«"><a href="#å’Œ-equals-çš„åŒºåˆ«" class="headerlink" title="== å’Œ equals çš„åŒºåˆ«"></a><code>==</code> å’Œ equals çš„åŒºåˆ«</h2><p><code>==</code> ï¼šå¯¹äºåŸºæœ¬ç±»å‹æ¥è¯´æ˜¯å€¼æ¯”è¾ƒï¼Œå¯¹äºå¼•ç”¨ç±»å‹æ¥è¯´æ˜¯å¼•ç”¨æ¯”è¾ƒ<br>equalsï¼šå¼•ç”¨æ¯”è¾ƒï¼Œä½†ä¸€äº›ç±»é‡å†™äº† equals æ–¹æ³•ï¼Œå¦‚ Stringã€Integer ç­‰ï¼Œå˜æˆäº†å€¼æ¯”è¾ƒã€‚</p>
<h2 id="ä½¿ç”¨-equals-çš„å‰æ"><a href="#ä½¿ç”¨-equals-çš„å‰æ" class="headerlink" title="ä½¿ç”¨ equals çš„å‰æ"></a>ä½¿ç”¨ equals çš„å‰æ</h2><p>ä½¿ç”¨ equals è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚ï¼š<br>a å’Œ b æ˜¯ä¸¤ä¸ªå¯¹è±¡</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">a.getId().equals(b.getId())</span><br></pre></td></tr></table></figure>

<p>éœ€è¦ç¡®ä¿ a.getId()ä¸ä¸º nullï¼Œå› ä¸º null æ˜¯æ²¡æœ‰.equals()æ–¹æ³•çš„ã€‚</p>
<h2 id="å„ç§å¯¹è±¡ä½¿ç”¨-equals"><a href="#å„ç§å¯¹è±¡ä½¿ç”¨-equals" class="headerlink" title="å„ç§å¯¹è±¡ä½¿ç”¨ equals"></a>å„ç§å¯¹è±¡ä½¿ç”¨ equals</h2><p>String ç±»å‹ï¼š<br>å¯ä»¥ä½¿ç”¨ StringUtils.equals()è¿›è¡Œæ¯”è¾ƒï¼Œè¯¥æ–¹æ³•å†…ç½®éç©ºæ ¡éªŒ<br>å…¶ä½™å°è£…ç±»å‹ï¼š<br>å¯ä»¥ä½¿ç”¨ Objects.equals()è¿›è¡Œæ¯”è¾ƒï¼Œè¯¥æ–¹æ³•å†…ç½®éç©ºæ ¡éªŒ<br>ä½¿ç”¨ä¸‰ç›®è¿ç®—ç¬¦ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">a.getId() == <span class="keyword">null</span> ? b.getId() == <span class="keyword">null</span> ? <span class="keyword">false</span> : <span class="keyword">true</span> : a.getId().equals(b.getId())</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>åç«¯</category>
        <category>Java</category>
      </categories>
      <tags>
        <tag>equals</tag>
      </tags>
  </entry>
  <entry>
    <title>ä¸€æ¬¾æ™ºèƒ½çš„æ—¥æœŸè§£æå·¥å…·</title>
    <url>/2021/03/19/%E4%B8%80%E6%AC%BE%E6%99%BA%E8%83%BD%E7%9A%84%E6%97%A5%E6%9C%9F%E8%A7%A3%E6%9E%90%E5%B7%A5%E5%85%B7/</url>
    <content><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p><code>Java</code> ä¸­æ—¥æœŸã€æ—¶é—´ç›¸å…³çš„ç±»ç›¸å½“çš„å¤šï¼Œå¹¶ä¸”åˆ†ä¸åŒçš„ç‰ˆæœ¬æä¾›äº†ä¸åŒçš„å®ç°ï¼ŒåŒ…æ‹¬ <code>Date</code> ã€ <code>Calendar</code> ã€ <code>LocalDateTime</code> ã€ <code>ZoneDateTime</code> ã€ <code>OffsetDateTime</code> ç­‰ç­‰ã€‚é’ˆå¯¹è¿™äº›æ—¶é—´ç±»å‹åˆé€šè¿‡ <code>SimpleDateFormat</code> å’Œ <code>DateTimeFormatter</code> å®ç°ä¸åŒçš„æ—¥æœŸä¸å­—ç¬¦ä¸²ä¹‹é—´çš„æ ¼å¼åŒ–å’Œè§£æã€‚</p>
<p>ä¸ºäº†åº”å¯¹å„ç§å„æ ·çš„æ—¥æœŸè§£æï¼Œæˆ‘ä»¬é€šå¸¸ä¼šå°è£…ç±»ä¼¼äº <code>DateUtils</code> çš„å·¥å…·ç±»ï¼Œä¸“é—¨ç”¨æ¥å¤„ç†æ—¥æœŸå­—ç¬¦ä¸²çš„è§£æï¼ŒåŒæ—¶ä¸ºäº†å…¼å®¹ä¸åŒæ ¼å¼çš„æ—¥æœŸå­—ç¬¦ä¸²ï¼Œåˆéœ€è¦é¢„å…ˆæšä¸¾å‡ºå¯èƒ½ç”¨åˆ°çš„æ—¥æœŸæ ¼å¼ã€‚è¿™ç§ä¼ ç»Ÿçš„ <code>DateUtils</code> é€šå¸¸ä¼šé¢ä¸´æ€§èƒ½ä¸å…¼å®¹æ€§çš„ä¸¤éš¾é—®é¢˜ã€‚</p>
<p>è€Œæœ¬æ–‡è¦ä»‹ç»çš„ï¼Œæ˜¯ä¸€ä¸ªæˆªç„¶ä¸åŒçš„æ—¥æœŸè§£æå·¥å…· <code>dateparser</code> ï¼Œå®ƒå¯ä»¥æ™ºèƒ½åœ°è§£æå‡ ç™¾ä¸Šåƒç§ä»»æ„æ ¼å¼çš„æ—¥æœŸå­—ç¬¦ä¸²ï¼Œæ›´ä¸ºéš¾å¾—çš„æ˜¯å®ƒçš„æ€§èƒ½åŒæ ·éå¸¸å‡ºè‰²ã€‚</p>
<h2 id="DateUtils-çš„ä¸¤éš¾é—®é¢˜"><a href="#DateUtils-çš„ä¸¤éš¾é—®é¢˜" class="headerlink" title="DateUtils çš„ä¸¤éš¾é—®é¢˜"></a>DateUtils çš„ä¸¤éš¾é—®é¢˜</h2><p>ä¸€ä¸ªæ¯”è¾ƒå…¸å‹çš„æ—¥æœŸè§£æå‡½æ•°ç±»ä¼¼è¿™æ ·ï¼ˆè¿™æ˜¯ <code>commons-lang3</code> åœ¨å…¶ <code>DateUtils</code> ä¸­æä¾›çš„å‡½æ•°ï¼‰ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Date <span class="title">parseDate</span><span class="params">(<span class="keyword">final</span> String str, <span class="keyword">final</span> String... parsePatterns)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> parseDate(str, <span class="keyword">null</span>, parsePatterns);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™ç§æ—¥æœŸè§£æå‡½æ•°çš„å†…éƒ¨é€»è¾‘ï¼Œå¾€å¾€æ˜¯æ ¹æ®ä¸€æ‰¹ <code>DATE_FORMAT</code> è½®ç•ªå°è¯•ï¼Œé€šè¿‡å¼‚å¸¸é‡è¯•çš„æ–¹å¼è¯•å‡ºæ¥å”¯ä¸€åŒ¹é…çš„æ ¼å¼ã€‚è¿™ç§ç®€å•ç²—æš´çš„æ–¹å¼ï¼Œäº‹å®ä¸Šå­˜åœ¨ç€ä¸€ä¸ªä¸¤éš¾é—®é¢˜ã€‚</p>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬å¾ˆéš¾ç©·ä¸¾å‡ºå…¨éƒ¨å¯èƒ½å‡ºç°çš„æ—¥æœŸæ ¼å¼ï¼Œå¹´æœˆæ—¥çš„åˆ†éš”ç¬¦ã€æ’åˆ—æ¬¡åºã€æ—¶åˆ†ç§’ã€æ˜¯å¦æœ‰æ¯«ç§’ã€æ—¶åŒºå¤„ç†ã€PM ä¸ AM çš„æ”¯æŒç­‰ç­‰ï¼Œç½—åˆ—å‡ºæ¥çš„è¯ä¸è®¡å…¶æ•°ã€‚</p>
<p>å…¶æ¬¡ï¼Œå¼‚å¸¸é‡è¯•çš„æ–¹å¼å­˜åœ¨ä¸€äº›æ€§èƒ½æŸè€—ï¼Œæ®æˆ‘ç²—ç•¥æµ‹ç®—ï¼Œåœ¨ MBP ç¡¬ä»¶ç¯å¢ƒä¸­å¼‚å¸¸ä¸­æ–­å¤§æ¦‚éœ€è¦æ¶ˆè€— <code>2</code> å¾®ç§’ï¼Œè€Œä¸€æ¬¡æ—¥æœŸè§£æå¯èƒ½æ¶ˆè€— <code>0.75</code> å¾®ç§’ã€‚å¦‚æœæä¾›çš„ <code>parsePatterns</code> æ•°é‡å¾ˆå¤šï¼Œåˆ™è§£æä¸€ä¸ªæ—¥æœŸå­—ç¬¦ä¸²çš„å¾ªç¯é‡è¯•çš„æœ€ç»ˆè€—æ—¶ç”šè‡³ä¼šè¶…è¿‡ <code>Redis</code> è¯»å†™æ“ä½œã€‚</p>
<p>é‚£ä¹ˆï¼Œæœ‰æ²¡æœ‰åŠæ³•æ—¢å¯ä»¥æ”¯æŒæ— æ•°å¤šä¸ªä¸è§„åˆ™çš„æ—¥æœŸå­—ç¬¦ä¸²ï¼ŒåŒæ—¶ä¹Ÿæ²¡æœ‰æ€§èƒ½é—®é¢˜çš„æŠ€æœ¯æ–¹æ¡ˆå‘¢ï¼Ÿ</p>
<h2 id="dateparser"><a href="#dateparser" class="headerlink" title="dateparser"></a><code>dateparser</code></h2><p>è¿™å°±æ˜¯è§£å†³æ—¥æœŸå­—ç¬¦ä¸²è§£æçš„çµä¸¹å¦™è¯ï¼Œå®ƒæ˜¯ä¸€ä¸ªé«˜æ€§èƒ½ä¸”éå¸¸æ™ºèƒ½çš„ datetime å­—ç¬¦ä¸²è§£æå·¥å…·ã€‚</p>
<p>ä¸ºäº†å®ç°é«˜æ€§èƒ½ä¸å¯æ‰©å±•æ€§ï¼Œå®ƒå¹¶æ²¡æœ‰é‡‡ç”¨ <code>SimpleDateFormat</code> æˆ– <code>DateTimeFormatter</code> ï¼Œè€Œæ˜¯æ­£åˆ™è¡¨è¾¾å¼ã€‚é€šè¿‡é¢„å®šä¹‰çš„æ­£åˆ™è¡¨è¾¾å¼æ¥è‡ªåŠ¨åœ°æ•æ‰ä¸åŒæ ¼å¼çš„æ—¥æœŸç‰‡æ®µï¼Œå®ƒå¯ä»¥è‡ªåŠ¨æŠ½å–å‡ºå­—ç¬¦ä¸²ä¸­å­˜åœ¨çš„ <code>year</code> , <code>month</code> , <code>day</code> , <code>hour</code> , <code>minute</code> , <code>second</code> , <code>zone</code> ç­‰ç†Ÿæ‚‰ã€‚</p>
<p>è¿™äº›é¢„å®šä¹‰çš„æ­£åˆ™è¡¨è¾¾å¼ç‰‡æ®µåŒ…æ‹¬ï¼š</p>
<p><code>(?&lt;week&gt;%s)\W*</code> å¯ä»¥å°† <code>Monday</code> è§£æä¸º <code>week</code></p>
<p><code>?(?&lt;year&gt;\d&#123;4&#125;)$</code> å¯ä»¥å°† <code>2019</code> è§£æä¸º <code>year</code></p>
<p><code>^(?&lt;year&gt;\d&#123;4&#125;)(?&lt;month&gt;\d&#123;2&#125;)$</code> å¯ä»¥æŠ½å–å‡º <code>201909</code> å†…éƒ¨çš„ <code>year</code> å’Œ <code>month</code></p>
<p><code>?(?&lt;hour&gt;\d&#123;1,2&#125;) oâ€™clock\W*</code> å¯ä»¥å°† <code>12 oâ€™clock</code> è§£æä¸º <code>hour</code></p>
<p>æ›´å¤šè§„åˆ™å‚è§ <code>DateParserBuilder.java</code></p>
<p>å¦‚æ­¤å¤šçš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œä¼šä¸ä¼šä¹Ÿå­˜åœ¨æ€§èƒ½éšæ‚£å‘¢ï¼Ÿå¦‚æœä½¿ç”¨çš„æ˜¯ <code>java.util.regex</code> åŒ…æ¥è¿›è¡Œå¾ªç¯åŒ¹é…ï¼Œéšç€è§„åˆ™å¢åŠ ï¼Œç¡®å®ä¼šæœ‰æ€§èƒ½é—®é¢˜ã€‚<br>ä½†æ˜¯ <code>dateparser</code> ä½¿ç”¨ <code>retree</code> å°†é¢„å®šä¹‰çš„ä¸€å¤§æ‰¹æ­£åˆ™è¡¨è¾¾å¼åˆå¹¶ä¸ºä¸€é¢—æ ‘ï¼Œä¹Ÿå°±æ˜¯æ­£åˆ™åŒ¹é…æ ‘ã€‚å®ƒå¯ä»¥éå¸¸å¿«é€Ÿåœ°å¯¹ä¸€å¤§æ‰¹æ­£åˆ™è¡¨è¾¾å¼æ‰§è¡Œå¹¶è¡ŒåŒ¹é…ï¼Œå†…éƒ¨ç»“æ„å¯ä»¥ç†è§£ä¸ºå­—å…¸æ ‘ï¼Œä½†æ˜¯æ ‘ä¸­çš„èŠ‚ç‚¹å¹¶ä¸æ˜¯å­—æ¯ï¼Œè€Œæ˜¯æ­£åˆ™åŒ¹é…èŠ‚ç‚¹ã€‚</p>
<h2 id="å®‰è£…-Maven-ä¾èµ–"><a href="#å®‰è£…-Maven-ä¾èµ–" class="headerlink" title="å®‰è£… Maven ä¾èµ–"></a>å®‰è£… Maven ä¾èµ–</h2><p>å¯ä»¥é€šè¿‡æ­¤ <code>maven</code> åæ ‡å¼•å…¥ä¾èµ–</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.sisyphsu<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>dateparser<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="åŸºç¡€ä½¿ç”¨"><a href="#åŸºç¡€ä½¿ç”¨" class="headerlink" title="åŸºç¡€ä½¿ç”¨"></a>åŸºç¡€ä½¿ç”¨</h2><p><code>dateparser</code> æä¾›äº†ä¸€ä¸ª <code>DateParserUtils</code> å·¥å…·ç±»ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨å®ƒå°†å­—ç¬¦ä¸²è§£æä¸º <code>Date</code> ã€ <code>Calendar</code> ã€ <code>LocalDateTime</code> ã€ <code>OffsetDateTime</code> ç­‰ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Date date = DateParserUtils.parseDate(<span class="string">&quot;Mon Jan 02 15:04:05 -0700 2006&quot;</span>);</span><br><span class="line"><span class="comment">// Tue Jan 03 06:04:05 CST 2006</span></span><br><span class="line">Calendar calendar =</span><br><span class="line">DateParserUtils.parseCalendar(<span class="string">&quot;Fri Jul 03 2015 18:04:07 GMT+0100 (GMT Daylight Time)&quot;</span>);</span><br><span class="line"><span class="comment">// 2015-07-03T17:04:07Z</span></span><br><span class="line">LocalDateTime dateTime =</span><br><span class="line">DateParserUtils.parseDateTime(<span class="string">&quot;2019-09-20 10:20:30.12345678 +0200&quot;</span>);</span><br><span class="line"><span class="comment">// 2019-09-20T16:20:30.123456780</span></span><br><span class="line">OffsetDateTime offsetDateTime =</span><br><span class="line">DateParserUtils.parseOffsetDateTime(<span class="string">&quot;2015-09-30 18:48:56.35272715 +0000 UTC&quot;</span>);</span><br><span class="line"><span class="comment">// 2015-09-30T18:48:56.352727150Z</span></span><br></pre></td></tr></table></figure>

<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå®ƒä¼šæ ¹æ®å­—ç¬¦ä¸²ä¸­æ ‡æ˜çš„ <code>TimeZon</code> e æˆ– <code>ZoneOffset</code> è‡ªåŠ¨è¿›è¡Œåç§»é‡è½¬æ¢ã€‚</p>
<h2 id="åˆ›å»ºæ–°-DateParser-å®ä¾‹"><a href="#åˆ›å»ºæ–°-DateParser-å®ä¾‹" class="headerlink" title="åˆ›å»ºæ–° DateParser å®ä¾‹"></a>åˆ›å»ºæ–° DateParser å®ä¾‹</h2><p>ç”±äº <code>DateParser</code> ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼ŒåŒæ—¶ <code>parse</code> æ“ä½œé€šå¸¸éå¸¸å¿«é€Ÿï¼ˆ1usï¼‰ï¼Œå› æ­¤ <code>DateParserUtils</code> å†…éƒ¨ç›´æ¥ç»´æŠ¤äº†ä¸€ä¸ª <code>DateParser</code> å•ä¾‹ï¼Œç„¶åé€šè¿‡ <code>synchronized</code> è¿›è¡Œå¹¶å‘æ§åˆ¶ã€‚</p>
<p>å¦‚æœä½ æƒ³åœ¨å¤šçº¿ç¨‹ä¸­é«˜é¢‘ç‡ã€å¹¶å‘åœ°ä½¿ç”¨å®ƒï¼Œå°±åº”è¯¥ä¸ºä¸åŒçš„çº¿ç¨‹åˆ›å»ºä¸åŒçš„ <code>DateParser</code> å®ä¾‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">DateParser parser = DateParser.newBuilder().build();</span><br><span class="line">Date date = parser.parseDate(<span class="string">&quot;Mon Jan 02 15:04:05 -0700 2006&quot;</span>);</span><br><span class="line"><span class="comment">// Tue Jan 03 06:04:05 CST 2006</span></span><br></pre></td></tr></table></figure>

<p><code>DateParser</code> å®ä¾‹ç›¸å½“ç¬¨é‡ä¸€äº›ï¼Œæ‰€ä»¥ä½ åº”è¯¥å°½é‡å¤šçš„å¤ç”¨å®ƒä»¥æé«˜æ€§èƒ½ã€‚</p>
<h2 id="MM-dd-ä¸-dd-MM-çš„ä¼˜å…ˆçº§"><a href="#MM-dd-ä¸-dd-MM-çš„ä¼˜å…ˆçº§" class="headerlink" title="MM/dd ä¸ dd/MM çš„ä¼˜å…ˆçº§"></a><code>MM/dd</code> ä¸ <code>dd/MM</code> çš„ä¼˜å…ˆçº§</h2><p>å¤šæ•°æƒ…å†µä¸‹ï¼Œ <code>dateparser</code> å¯ä»¥æŒ‰ç…§è§„åˆ™è‡ªåŠ¨åœ°è¯†åˆ«å‡ºå­—ç¬¦ä¸²å†…éƒ¨çš„ <code>month</code> ä¸ <code>day</code> ç‰‡æ®µã€‚</p>
<p>ä½†æ˜¯å¯¹äº <code>MM/dd/yy</code> å’Œ <code>dd/MM/yy</code> ï¼Œæœ‰æ—¶å€™å®ƒå°±éš¾ä»¥åŒºåˆ†äº†ã€‚å› ä¸ºä¸–ç•Œä¸Šå¤šæ•°å›½å®¶ä¼šä½¿ç”¨ <code>dd/MM/yy</code> ä½œä¸ºæ—¥æœŸçš„æ ¼å¼ï¼Œä½†æ˜¯ä¹Ÿæœ‰å°‘æ•°å›½å®¶ä¼šç‰¹ç«‹ç‹¬è¡Œåœ°ä½¿ç”¨ <code>MM/dd/yy</code> ä½œä¸ºæ—¥æœŸæ ¼å¼ï¼Œæœ€å…¸å‹çš„å°±æ˜¯ç¾å¸å›½ä¸»ä¹‰ã€‚</p>
<p>å› æ­¤å½“ <code>dateparser</code> é‡åˆ°ç±»ä¼¼äº <code>7.8.2019</code> è¿™æ ·çš„æ—¥æœŸæ—¶ï¼Œå®ƒå°±å¾ˆéš¾åˆ¤æ–­åˆ°åº•æ˜¯ 7 æœˆ 8 æ—¥è¿˜æ˜¯ 8 æœˆ 7 æ—¥ã€‚</p>
<p>ä¸ºè§£å†³è¿™ä¸ªéš¾é¢˜ï¼Œ <code>dateparser</code> å†…éƒ¨å¢åŠ äº†ä¸€ä¸ªåä¸º <code>preferMonthFirst</code> çš„é€‰é¡¹ï¼Œç”¨äºè¾…åŠ©è§£å†³è¿™ä¸ªé—®é¢˜ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">DateParserUtils.preferMonthFirst(<span class="keyword">true</span>);</span><br><span class="line">DateParserUtils.parseCalendar(<span class="string">&quot;08.03.71&quot;</span>);</span><br><span class="line"><span class="comment">// 1971-08-03</span></span><br><span class="line">DateParserUtils.preferMonthFirst(<span class="keyword">false</span>);</span><br><span class="line">DateParserUtils.parseCalendar(<span class="string">&quot;08.03.71&quot;</span>);</span><br><span class="line"><span class="comment">// 1971-03-08</span></span><br></pre></td></tr></table></figure>

<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚æœæ— æ³•ç”„åˆ«æœˆä¸æ—¥ï¼Œåˆ™è§†ä¸ºæœˆåœ¨åã€‚å¦‚æœä½ æŒ‡å®šäº† <code>preferMonthFirst</code> ä¸º <code>true</code> ï¼Œåˆ™è¯•ä¸ºæœˆåœ¨å‰ã€‚</p>
<h2 id="è‡ªå®šä¹‰-Parser"><a href="#è‡ªå®šä¹‰-Parser" class="headerlink" title="è‡ªå®šä¹‰ Parser"></a>è‡ªå®šä¹‰ Parser</h2><p>ä½ å¯ä»¥ä½¿ç”¨ <code>DateParserBuilder</code> æ„å»ºè‡ªå·±çš„æ—¥æœŸè§£æå™¨ï¼Œé€šè¿‡æ­¤ <code>builder</code> ï¼Œä½ å¯ä»¥è‡ªå®šä¹‰æ–°çš„è§£æè§„åˆ™ã€‚</p>
<p>ä¾‹å¦‚ï¼Œå¦‚æœä½ æƒ³æ”¯æŒ <code>ã€2019ã€‘</code> è¿™æ ·çš„ <code>year</code> å­—ç¬¦ä¸²ï¼Œå¯ä»¥è¿™æ ·åšï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">DateParser parser = DateParser.newBuilder().addRule(<span class="string">&quot;ã€(?&lt;year&gt;\\d&#123;4&#125;)ã€‘&quot;</span>).build();</span><br><span class="line">Calendar calendar = parser.parseCalendar(<span class="string">&quot;ã€1991ã€‘&quot;</span>);</span><br><span class="line"><span class="keyword">assert</span> calendar.get(Calendar.YEAR) == <span class="number">1991</span>;</span><br></pre></td></tr></table></figure>

<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ­£åˆ™è¡¨è¾¾å¼ <code>ã€(?&lt;year&gt;\\d&#123;4&#125;)ã€‘</code> é‡Œé¢çš„ <code>year</code> éå¸¸é‡è¦ï¼Œå®ƒæ˜¯ <code>dateparser</code> å†…ç½®çš„æ•æ‰å…³é”®è¯ã€‚</p>
<p>ä½ ä¹Ÿå¯ä»¥å¢åŠ æ›´åŠ çµæ´»çš„è§£æè§„åˆ™ï¼Œå°±åƒè¿™æ ·ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">DateParser parser = DateParser.newBuilder()</span><br><span class="line">.addRule(<span class="string">&quot;æ°‘å›½(\\d&#123;3&#125;)å¹´&quot;</span>, (input, matcher, dt) -&gt; &#123;</span><br><span class="line">    <span class="keyword">int</span> offset = matcher.start(<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">int</span> i0 = input.charAt(offset) - <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">    <span class="keyword">int</span> i1 = input.charAt(offset + <span class="number">1</span>) - <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">    <span class="keyword">int</span> i2 = input.charAt(offset + <span class="number">2</span>) - <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">    dt.setYear(i0 * <span class="number">100</span> + i1 * <span class="number">10</span> + i2 + <span class="number">1911</span>);</span><br><span class="line">&#125;)</span><br><span class="line">.build();</span><br><span class="line">Calendar calendar = parser.parseCalendar(<span class="string">&quot;æ°‘å›½101å¹´&quot;</span>);</span><br><span class="line"><span class="keyword">assert</span> calendar.get(Calendar.YEAR) == <span class="number">2012</span>;</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªä¾‹å­é‡Œé¢ï¼Œæ–°å¢äº†ä¸€ä¸ªæ•æ‰å¹¶è§£æ <code>æ°‘å›½xxxå¹´</code> çš„æ—¥æœŸè§„åˆ™ã€‚</p>
<h2 id="æ€§èƒ½å¯¹æ¯”"><a href="#æ€§èƒ½å¯¹æ¯”" class="headerlink" title="æ€§èƒ½å¯¹æ¯”"></a>æ€§èƒ½å¯¹æ¯”</h2><p>é¦–å…ˆï¼Œåœ¨å•ä¸€æ—¥æœŸæ ¼å¼ä¸‹ï¼Œå¯¹æ¯”ä¸€ä¸‹ <code>dateparser</code> ä¸ <code>SimpleDateFormat</code> çš„æ€§èƒ½è¡¨ç°ï¼š</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">Benchmark               Mode  Cnt     Score    Error  Units</span><br><span class="line">SingleBenchmark.java    avgt    6   921.632 Â± 12.299  ns/op</span><br><span class="line">SingleBenchmark.parser  avgt    6  1553.909 Â± 70.664  ns/op</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹åˆ°ï¼Œåœ¨æ—¥æœŸæ ¼å¼å›ºå®šä¸”å•ä¸€çš„æƒ…å†µä¸‹ï¼Œ <code>dateparser</code> åœ¨æ€§èƒ½ä¸Šå¤„äºä¸‹é£ï¼Œè¿™ä¹Ÿåœ¨é¢„æ–™ä¹‹ä¸­ã€‚</p>
<p>ç„¶åï¼Œåœ¨å•ä¸€æ—¥æœŸæ ¼å¼ä¸‹ï¼Œå¯¹æ¯”ä¸€ä¸‹ <code>dateparser</code> ä¸ <code>DateTimeFormatter</code> çš„æ€§èƒ½è¡¨ç°ï¼š</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">Benchmark                       Mode  Cnt     Score    Error  Units</span><br><span class="line">SingleDateTimeBenchmark.java    avgt    6   654.553 Â± 16.703  ns/op</span><br><span class="line">SingleDateTimeBenchmark.parser  avgt    6  1680.690 Â± 34.214  ns/op</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹åˆ°ï¼Œ <code>DateTimeFormatter</code> çš„æ€§èƒ½è¡¨ç°ç¡®å®æ¯” S <code>impleDateFormat</code> æ›´åŠ å‡ºè‰²ä¸€äº›ã€‚åŒæ—¶ dateparser çš„è®¾è®¡åˆè¡·æ˜¯ä¸ºäº†åº”å¯¹ä¸è§„åˆ™æ—¥æœŸæ ¼å¼ï¼Œå› æ­¤åœ¨å›ºå®šæ ¼å¼åŒ¹é…ä¸Šå­˜åœ¨åŠ£åŠ¿å¹¶ä¸æ„å¤–ã€‚</p>
<p>å¦‚æœæˆ‘ä»¬å°†æ—¥æœŸæ ¼å¼å¢åŠ ä¸º 16 ç§æ—¶ï¼Œæ€§èƒ½è¡¨ç°å°±ä¸ä¸€æ ·äº†ï¼š</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">Benchmark              Mode  Cnt      Score      Error  Units</span><br><span class="line">MultiBenchmark.format  avgt    6  47385.021 Â± 1083.649  ns/op</span><br><span class="line">MultiBenchmark.parser  avgt    6  22852.113 Â±  310.720  ns/op</span><br></pre></td></tr></table></figure>

<p>å¦‚æœæ¢ç®—ä¸€ä¸‹ï¼Œæ— è®ºæ—¥æœŸæ ¼å¼æ˜¯ä¸€ç§è¿˜æ˜¯ 16 ä¸­ï¼Œ <code>dateparser</code> çš„æ€§èƒ½å§‹ç»ˆç»´æŒåœ¨ <code>1.5us</code> ï¼Œè¯´æ˜å®ƒåœ¨ç®—æ³•ä¸Šæ˜¯éå¸¸ç¨³å®šçš„ï¼Œé¢å¯¹ä¸åŒçš„åœºæ™¯ä¸ä¼šæœ‰ä»€ä¹ˆæ€§èƒ½æŸå¤±</p>
<h2 id="æ”¯æŒçš„æ—¥æœŸæ ¼å¼ï¼ˆéƒ¨åˆ†ï¼‰"><a href="#æ”¯æŒçš„æ—¥æœŸæ ¼å¼ï¼ˆéƒ¨åˆ†ï¼‰" class="headerlink" title="æ”¯æŒçš„æ—¥æœŸæ ¼å¼ï¼ˆéƒ¨åˆ†ï¼‰"></a>æ”¯æŒçš„æ—¥æœŸæ ¼å¼ï¼ˆéƒ¨åˆ†ï¼‰</h2><p>ä»¥ä¸‹ä¸º <code>dateparser</code> åœ¨å•å…ƒæµ‹è¯•ä¸­å®Œæˆæµ‹è¯•è§£æçš„æ—¥æœŸæ ¼å¼æ ·ä¾‹ï¼Œå…·ä½“å¯ä»¥å‚è€ƒæºä»£ç ã€‚åŒæ—¶éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸ªåˆ—è¡¨åªæ˜¯ä¸€ä¸ªå­é›†ï¼š</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">May 8, 2009 5:57:51 PM</span><br><span class="line">oct 7, 1970</span><br><span class="line">oct 7, &#x27;70</span><br><span class="line">oct. 7, 1970</span><br><span class="line">oct. 7, 70</span><br><span class="line">Mon Jan  2 15:04:05 2006</span><br><span class="line">Mon Jan  2 15:04:05 MST 2006</span><br><span class="line">Mon Jan 02 15:04:05 -0700 2006</span><br><span class="line">Monday, 02-Jan-06 15:04:05 MST</span><br><span class="line">Mon, 02 Jan 2006 15:04:05 MST</span><br><span class="line">Tue, 11 Jul 2017 16:28:13 +0200 (CEST)</span><br><span class="line">Mon, 02 Jan 2006 15:04:05 -0700</span><br><span class="line">Thu, 4 Jan 2018 17:53:36 +0000</span><br><span class="line">Mon Aug 10 15:44:11 UTC+0100 2015</span><br><span class="line">Fri Jul 03 2015 18:04:07 GMT+0100 (GMT Daylight Time)</span><br><span class="line">September 17, 2012 10:09am</span><br><span class="line">September 17, 2012 at 10:09am PST-08</span><br><span class="line">September 17, 2012, 10:10:09</span><br><span class="line">October 7, 1970</span><br><span class="line">October 7th, 1970</span><br><span class="line">12 Feb 2006, 19:17</span><br><span class="line">12 Feb 2006 19:17</span><br><span class="line">7 oct 70</span><br><span class="line">7 oct 1970</span><br><span class="line">03 February 2013</span><br><span class="line">1 July 2013</span><br><span class="line">2013-Feb-03</span><br><span class="line">3/31/2014</span><br><span class="line">03/31/2014</span><br><span class="line">08/21/71</span><br><span class="line">8/1/71</span><br><span class="line">4/8/2014 22:05</span><br><span class="line">04/08/2014 22:05</span><br><span class="line">4/8/14 22:05</span><br><span class="line">04/2/2014 03:00:51</span><br><span class="line">8/8/1965 12:00:00 AM</span><br><span class="line">8/8/1965 01:00:01 PM</span><br><span class="line">8/8/1965 01:00 PM</span><br><span class="line">8/8/1965 1:00 PM</span><br><span class="line">8/8/1965 12:00 AM</span><br><span class="line">4/02/2014 03:00:51</span><br><span class="line">03/19/2012 10:11:59</span><br><span class="line">03/19/2012 10:11:59.3186369</span><br><span class="line">2014/3/31</span><br><span class="line">2014/03/31</span><br><span class="line">2014/4/8 22:05</span><br><span class="line">2014/04/08 22:05</span><br><span class="line">2014/04/2 03:00:51</span><br><span class="line">2014/4/02 03:00:51</span><br><span class="line">2012/03/19 10:11:59</span><br><span class="line">2012/03/19 10:11:59.3186369</span><br><span class="line">2014å¹´04æœˆ08æ—¥</span><br><span class="line">2006-01-02T15:04:05+0000</span><br><span class="line">2009-08-12T22:15:09-07:00</span><br><span class="line">2009-08-12T22:15:09</span><br><span class="line">2009-08-12T22:15:09Z</span><br><span class="line">2014-04-26 17:24:37.3186369</span><br><span class="line">2012-08-03 18:31:59.257000000</span><br><span class="line">2014-04-26 17:24:37.123</span><br><span class="line">2013-04-01 22:43</span><br><span class="line">2013-04-01 22:43:22</span><br><span class="line">2014-12-16 06:20:00 UTC</span><br><span class="line">2014-12-16 06:20:00 GMT</span><br><span class="line">2014-04-26 05:24:37 PM</span><br><span class="line">2014-04-26 13:13:43 +0800</span><br><span class="line">2014-04-26 13:13:43 +0800 +08</span><br><span class="line">2014-04-26 13:13:44 +09:00</span><br><span class="line">2012-08-03 18:31:59.257000000 +0000 UTC</span><br><span class="line">2015-09-30 18:48:56.35272715 +0000 UTC</span><br><span class="line">2015-02-18 00:12:00 +0000 GMT</span><br><span class="line">2015-02-18 00:12:00 +0000 UTC</span><br><span class="line">2015-02-08 03:02:00 +0300 MSK m=+0.000000001</span><br><span class="line">2015-02-08 03:02:00.001 +0300 MSK m=+0.000000001</span><br><span class="line">2017-07-19 03:21:51+00:00</span><br><span class="line">2014-04-26</span><br><span class="line">2014-04</span><br><span class="line">2014</span><br><span class="line">2014-05-11 08:20:13,787</span><br><span class="line">3.31.2014</span><br><span class="line">03.31.2014</span><br><span class="line">08.21.71</span><br><span class="line">2014.03</span><br><span class="line">2014.03.30</span><br><span class="line">20140601</span><br><span class="line">20140722105203</span><br><span class="line">1332151919</span><br><span class="line">1384216367189</span><br><span class="line">1384216367111222</span><br><span class="line">1384216367111222333</span><br></pre></td></tr></table></figure>

<h2 id="åŸæ–‡åœ°å€"><a href="#åŸæ–‡åœ°å€" class="headerlink" title="åŸæ–‡åœ°å€"></a>åŸæ–‡åœ°å€</h2><p>æœ¬æ–‡è½¬è½½è‡³[<a href="https://sulin.me/2019/38Z4HAT.html]">https://sulin.me/2019/38Z4HAT.html]</a></p>
]]></content>
      <categories>
        <category>åç«¯</category>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Utils</tag>
        <tag>æ—¥æœŸè§£æ</tag>
      </tags>
  </entry>
  <entry>
    <title>å…³äºæˆ‘</title>
    <url>/2021/03/18/about/</url>
    <content><![CDATA[<h2 id="å¼ å‡¯"><a href="#å¼ å‡¯" class="headerlink" title="å¼ å‡¯"></a>å¼ å‡¯</h2><h2 id="ä¸ªäººä¿¡æ¯"><a href="#ä¸ªäººä¿¡æ¯" class="headerlink" title="ä¸ªäººä¿¡æ¯"></a>ä¸ªäººä¿¡æ¯</h2><h2 id="æ•™è‚²ç»å†"><a href="#æ•™è‚²ç»å†" class="headerlink" title="æ•™è‚²ç»å†"></a>æ•™è‚²ç»å†</h2><h2 id="å·¥ä½œç»å†"><a href="#å·¥ä½œç»å†" class="headerlink" title="å·¥ä½œç»å†"></a>å·¥ä½œç»å†</h2><h2 id="é¡¹ç›®ç»å†"><a href="#é¡¹ç›®ç»å†" class="headerlink" title="é¡¹ç›®ç»å†"></a>é¡¹ç›®ç»å†</h2><h2 id="æŠ€èƒ½æ¸…å•"><a href="#æŠ€èƒ½æ¸…å•" class="headerlink" title="æŠ€èƒ½æ¸…å•"></a>æŠ€èƒ½æ¸…å•</h2>]]></content>
      <categories>
        <category>ä¸ªäºº</category>
      </categories>
      <tags>
        <tag>ç®€å†</tag>
      </tags>
  </entry>
  <entry>
    <title>Vueå‡½æ•°é˜²æŠ–å’Œå‡½æ•°èŠ‚æµ</title>
    <url>/2021/03/18/Vue%E5%87%BD%E6%95%B0%E9%98%B2%E6%8A%96%E5%92%8C%E5%87%BD%E6%95%B0%E8%8A%82%E6%B5%81/</url>
    <content><![CDATA[<h2 id="å‡½æ•°é˜²æŠ–ï¼ˆdebounceï¼‰"><a href="#å‡½æ•°é˜²æŠ–ï¼ˆdebounceï¼‰" class="headerlink" title="å‡½æ•°é˜²æŠ–ï¼ˆdebounceï¼‰"></a>å‡½æ•°é˜²æŠ–ï¼ˆdebounceï¼‰</h2><h3 id="åº”ç”¨åœºæ™¯"><a href="#åº”ç”¨åœºæ™¯" class="headerlink" title="åº”ç”¨åœºæ™¯"></a>åº”ç”¨åœºæ™¯</h3><ul>
<li>ç™»å½•ã€å‘çŸ­ä¿¡ç­‰æŒ‰é’®é¿å…ç”¨æˆ·ç‚¹å‡»å¤ªå¿«ï¼Œä»¥è‡´äºå‘é€äº†å¤šæ¬¡è¯·æ±‚ï¼Œéœ€è¦é˜²æŠ–</li>
<li>è°ƒæ•´æµè§ˆå™¨çª—å£å¤§å°æ—¶ï¼Œresize æ¬¡æ•°è¿‡äºé¢‘ç¹ï¼Œé€ æˆè®¡ç®—è¿‡å¤šï¼Œæ­¤æ—¶éœ€è¦ä¸€æ¬¡åˆ°ä½ï¼Œå°±ç”¨åˆ°äº†é˜²æŠ–</li>
<li>æ–‡æœ¬ç¼–è¾‘å™¨å®æ—¶ä¿å­˜ï¼Œå½“æ— ä»»ä½•æ›´æ”¹æ“ä½œä¸€ç§’åè¿›è¡Œä¿å­˜</li>
</ul>
<h3 id="å®ç°æ–¹æ³•ï¼Œé˜²æŠ–é‡åœ¨æ¸…é›¶"><a href="#å®ç°æ–¹æ³•ï¼Œé˜²æŠ–é‡åœ¨æ¸…é›¶" class="headerlink" title="å®ç°æ–¹æ³•ï¼Œé˜²æŠ–é‡åœ¨æ¸…é›¶"></a>å®ç°æ–¹æ³•ï¼Œé˜²æŠ–é‡åœ¨æ¸…é›¶</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">debounce</span>(<span class="params">f, wait</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> timer</span><br><span class="line">    <span class="keyword">return</span> <span class="function">(<span class="params">...args</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">clearTimeout</span>(timer)</span><br><span class="line">        timer = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            f(..args)</span><br><span class="line">        &#125;, wait)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å‡½æ•°èŠ‚æµï¼ˆthrottleï¼‰"><a href="#å‡½æ•°èŠ‚æµï¼ˆthrottleï¼‰" class="headerlink" title="å‡½æ•°èŠ‚æµï¼ˆthrottleï¼‰"></a>å‡½æ•°èŠ‚æµï¼ˆthrottleï¼‰</h2><h3 id="åº”ç”¨åœºæ™¯-1"><a href="#åº”ç”¨åœºæ™¯-1" class="headerlink" title="åº”ç”¨åœºæ™¯"></a>åº”ç”¨åœºæ™¯</h3><ul>
<li><code>scroll</code>äº‹ä»¶ï¼Œæ¯éš”ä¸€ç§’è®¡ç®—ä¸€æ¬¡ä½ç½®ä¿¡æ¯ç­‰</li>
<li>æµè§ˆå™¨æ’­æ”¾äº‹ä»¶ï¼Œæ¯éš”ä¸€ç§’è®¡ç®—ä¸€æ¬¡è¿›åº¦ä¿¡æ¯ç­‰</li>
<li>input æ¡†å®æ—¶æœç´¢å¹¶å‘é€è¯·æ±‚å±•ç¤ºä¸‹æ‹‰åˆ—è¡¨ï¼Œæ¯éš”ä¸€ç§’å‘é€ä¸€æ¬¡è¯·æ±‚</li>
</ul>
<h4 id="å®ç°æ–¹æ³•ï¼ŒèŠ‚æµé‡åœ¨å¼€å…³é”"><a href="#å®ç°æ–¹æ³•ï¼ŒèŠ‚æµé‡åœ¨å¼€å…³é”" class="headerlink" title="å®ç°æ–¹æ³•ï¼ŒèŠ‚æµé‡åœ¨å¼€å…³é”"></a>å®ç°æ–¹æ³•ï¼ŒèŠ‚æµé‡åœ¨å¼€å…³é”</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">throttle</span>(<span class="params">f, wait</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> timer</span><br><span class="line">    <span class="keyword">return</span> <span class="function">(<span class="params">..args</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (timer) &#123; <span class="keyword">return</span> &#125;</span><br><span class="line">        timer = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            f(..args)</span><br><span class="line">            timer = <span class="literal">null</span></span><br><span class="line">        &#125;, wait)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><ul>
<li>é˜²æŠ–ï¼šé˜²æ­¢æŠ–åŠ¨ï¼Œå•ä½æ—¶é—´å†…äº‹ä»¶è§¦å‘ä¼šè¢«é‡ç½®ï¼Œé¿å…äº‹ä»¶è¢«è¯¯è§¦å‘å¤šæ¬¡ã€‚ä»£ç é‡åœ¨æ¸…é›¶<code>clearTimeout</code></li>
<li>èŠ‚æµï¼šæ§åˆ¶æµé‡ï¼Œå•ä½æ—¶é—´å†…äº‹ä»¶åªèƒ½è§¦å‘ä¸€æ¬¡ï¼Œå¦‚æœæœåŠ¡å™¨ç«¯çš„é™æµå³ Rate Limitã€‚ä»£ç å®ç°é‡åœ¨å¼€é”å…³é”<code>timer=timeoutï¼›timer=null</code></li>
</ul>
]]></content>
      <categories>
        <category>å‰ç«¯</category>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>é˜²æŠ–</tag>
        <tag>èŠ‚æµ</tag>
      </tags>
  </entry>
</search>
